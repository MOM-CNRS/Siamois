<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:sharedInput="http://xmlns.jcp.org/jsf/composite/pages/shared/input"
             xmlns:f="http://java.sun.com/jsf/core"

>
    <h:form id="newSpecimenForm">
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        <p:dialog widgetVar="newSpecimenDiag" id="newSpecimenDiag" showEffect="fade" closeOnEscape="true"
                  appendToBody="true" modal="true" styleClass="sia-new-unit-dialog">

            <f:facet name="header">
                <div class="ui-panel specimen-panel">
                    <div class="sia-flow-panel-title ui-panel-titlebar">
                        <i class="bi bi-pencil-square"/>
                        <span style="padding-right:0.5em;">Nouveau prelevement</span>
                    </div>
                </div>
            </f:facet>
            <div class="ui-panel specimen-panel">
                <ui:include src="/pages/shared/form/customForm.xhtml">
                    <ui:param name="panelModel" value="#{newSpecimenDialogBean}"/>
                    <ui:param name="layout" value="#{newSpecimenDialogBean.detailsForm.layout}"/>
                    <ui:param name="readOnly" value="#{false}"/>
                    <ui:param name="prefix" value="newSpecimen"/>
                    <ui:param name="panelId" value="newSpecimenForm:customFormPanel-newSpecimen-0"/>
                </ui:include>
            </div>

            <!-- Save/Cancel Toolbar -->
            <f:facet name="footer">
                <div class="ui-panel specimen-panel">
                    <p:toolbar class="panel-footer">
                        <p:toolbarGroup align="right">
                            <p:commandLink value='#{langBean.msg("common.action.cancel")}'
                                           oncomplete="PF('newSpecimenDiag').hide()"
                                           immediate="true"
                                           style="margin-right: 1rem">
                            </p:commandLink>
                            <p:commandButton id="createButton" value='#{langBean.msg("common.action.create")}'
                                             oncomplete="PF('newSpecimenDiag').hide()"
                                             action="#{newSpecimenDialogBean.create()}"
                                             update="flow"
                                             style="margin-right: 1rem">
                            </p:commandButton>
                            <p:commandButton id="createAndViewButton"
                                             oncomplete="PF('newSpecimenDialogBean').hide();handleScrollToTop();"
                                             update="flow"
                                             action="#{newSpecimenDialogBean.createAndOpen()}"
                                             value='#{langBean.msg("common.action.createAndView")}'
                                             style="margin-right: .5rem">
                            </p:commandButton>
                        </p:toolbarGroup>
                    </p:toolbar>
                </div>
            </f:facet>


        </p:dialog>
    </h:form>
</ui:fragment>