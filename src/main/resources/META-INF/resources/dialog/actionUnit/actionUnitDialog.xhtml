<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:p="http://primefaces.org/ui"
             xmlns:sharedLabel="http://xmlns.jcp.org/jsf/composite/pages/shared/label"
>

    <p:dialog id="dialog-new-action" header="Header" widgetVar="new-action-unit-dialog" minHeight="40" width="350" showEffect="fade" closeOnEscape="true" appendToBody="true">
        <h:messages id="messages"/>
        <h:form id="form-new-action">
            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>

            <div>
                        <span class="custom-header">
                            Nouvelle unit√© d'action pour #{spatialUnitBean.spatialUnit.name}
                            <p:chip label="#{spatialUnitBean.spatialUnit.category.label}" icon="pi pi-map-marker"

                                    styleClass="mr-2"/>
                        </span>


            </div>


            <p:outputPanel id="new-action" class="ui-fluid">
                <p:outputPanel>
                    <div class="field">
                        <p:outputLabel for="name">Name</p:outputLabel>
                        <p:inputText id="name" required="true" value="#{newActionUnitBean.actionUnit.name}"/>
                    </div>

                    <!-- Action Type -->
                    <div class="field">
                        <sharedLabel:openthesoLabel for="auto-complete-action-type" label="Type"/>
                        <p:autoComplete id="auto-complete-action-type"
                                        value="#{newActionUnitBean.fieldType}"
                                        completeMethod="#{newActionUnitBean.completeActionUnitType}"
                                        var="field" itemLabel="#{field.label}"
                                        itemValue="#{field}"
                                        required="true"
                                        converter="#{newActionUnitBean.conceptConverter}"
                                        forceSelection="true"
                                        scrollHeight="300"
                                        dropdown="true"/>
                    </div>

                </p:outputPanel>

                <p:commandButton
                        value='${langBean.msg("actionunit.button.create")}'
                        icon="pi pi-check"
                        action="#{newActionUnitBean.save}"
                        actionListener="#{newActionUnitBean.reinit(spatialUnitBean.spatialUnit)}"
                        update=":messages"

                />
                <p:commandButton value='${langBean.msg("button.cancel")}' icon="pi pi-times"
                                 class="ui-button-secondary" update="form-new-action" type="button"/>

            </p:outputPanel>


        </h:form>
    </p:dialog>


</ui:fragment>