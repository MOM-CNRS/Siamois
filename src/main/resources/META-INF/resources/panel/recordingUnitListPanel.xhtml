<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:recordingUnit="http://xmlns.jcp.org/jsf/composite/pages/recordingUnit/components"
             xmlns:table="http://xmlns.jcp.org/jsf/composite/pages/shared/table"
             xmlns:cellheader="http://java.sun.com/jsf/composite/pages/shared/cellheader"
             xmlns:f="http://java.sun.com/jsf/core"
             xmlns:h="http://java.sun.com/jsf/html"

>
    <!--@elvariable id="panelIndex" type="Integer"-->
    <!--@elvariable id="panelModel" type="fr.siamois.ui.bean.panel.models.panel.list.RecordingUnitListPanel"-->
    <!-- Conditionally render the message if it's set in the bean -->
    <p:staticMessage severity="error" summary="Error" closable="false"
                     detail="#{panelModel.errorMessage}"
                     rendered="#{not empty panelModel.errorMessage}"/>

    <h:form id="recordingUnitListForm"

    >
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        <table:entityTable
                displayColumnToggler="true"
                tableModel="#{panelModel.tableModel}"
                panelIndex="#{panelIndex}"
                id="recordingUnitList"
        >
            <f:facet name="beforeColumns">
                <p:column selectionBox="true" style="width:16px;text-align:center"/>
                <p:column toggleable="false"
                          headerText="#{langBean.msg('table.recordingunit.column.identifier')}"
                          sortable="true"
                          filterValue="#{cc.attrs.tableModel.lazyDataModel.nameFilter}"
                          filterable="true"
                          field="full_identifier"
                          id="identifierCol">

                    <p:commandLink
                            action="#{flowBean.goToRecordingUnitByIdNewPanel(item.id,cc.attrs.panelIndex)}"
                            onstart="PF('buiContent').show()"
                            oncomplete="PF('buiContent').hide();handleScrollToTop();"
                            process="@form"
                            update="flow"
                    >
                        <h:outputText value="#{item.displayFullIdentifier()}"/>
                    </p:commandLink>
                </p:column>

            </f:facet>
        </table:entityTable>
    </h:form>


</ui:fragment>