<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:table="http://xmlns.jcp.org/jsf/composite/pages/shared/table"
             xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
>
    <!--@elvariable id="panelIndex" type="Integer"-->
    <!--@elvariable id="panelModel" type="fr.siamois.ui.bean.panel.models.panel.list.SpatialUnitListPanel"-->
    <!-- Conditionally render the message if it's set in the bean -->
    <p:staticMessage severity="error" summary="Error" closable="false"
                     detail="#{panelModel.spatialUnitListErrorMessage}"
                     rendered="#{not empty panelModel.spatialUnitListErrorMessage}"/>

    <h:form id="spatialUnitListPanelForm">
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        <table:entityTable
                displayColumnToggler="true"
                tableModel="#{panelModel.tableModel}"
                panelIndex="#{panelIndex}"
                id="spatialUnitList"
        >
            <f:facet name="rightToolbar">
                <p:commandButton
                                 rendered="#{panelModel.tableModel.toolbarCreateConfig ne null and flowBean.isWriteMode and spatialUnitFieldBean.isCreateAllowed()}"
                                 value="#{langBean.msg('common.action.create')}"
                                 icon="bi bi-plus-square"
                                 actionListener="#{cc.attrs.tableModel.openCreateFromToolbar(genericNewUnitDialogBean)}"
                                 oncomplete="PF('newUnitDiag').show();"
                                 update="newUnitForm"
                                 style="margin-right:.5rem">
                </p:commandButton>
            </f:facet>
        </table:entityTable>
    </h:form>


</ui:fragment>