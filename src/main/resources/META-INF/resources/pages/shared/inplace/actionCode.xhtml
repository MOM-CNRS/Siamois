<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:cc="http://java.sun.com/jsf/composite"
        xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
>

    <cc:interface>
        <cc:attribute name="answer" type="fr.siamois.domain.models.form.customfieldanswer.CustomFieldAnswerSelectOneActionCode" required="true"/>
        <cc:attribute name="hasBeenModified" type="Boolean" required="false" default="false"/>
        <cc:attribute name="field" type="fr.siamois.domain.models.form.customfield.CustomFieldSelectOneActionCode"
                      required="true"/>
        <cc:attribute name="mode" type="String" required="false" default="READ"/>
        <cc:attribute name="label" type="String" required="false"/>
        <cc:attribute name="required" type="java.lang.Boolean" required="true"/>
        <cc:attribute name="updateTargetsOnBlur" type="String" required="false" default="@this"/>
    </cc:interface>

    <cc:implementation>
        <p:inplace mode="#{cc.attrs.mode}" toggleable="false">
            <f:facet name="output">
                <!-- Cas où answer.value n'est PAS null -->
                <ui:fragment rendered="#{not empty cc.attrs.answer.value}">
                    <h:outputText value="#{cc.attrs.answer.value.code}"/>
                    <p:chip
                            label="#{labelBean.findLabelOf(cc.attrs.answer.value.type)}"
                            styleClass="mr-2 action-unit-type-chip"/>
                </ui:fragment>

                <!-- Cas où answer.value est null -->
                <ui:fragment rendered="#{empty cc.attrs.answer.value}">
                    <h:outputText value="Aucun code associé"/>
                </ui:fragment>
            </f:facet>
            <f:facet name="input">

                <!-- Cas où answer.value n'est PAS null -->
                <ui:fragment rendered="#{not empty cc.attrs.answer.value}">
                    <h:outputText value="#{cc.attrs.answer.value.code}"/>
                    <p:chip
                            label="#{labelBean.findLabelOf(cc.attrs.answer.value.type)}"
                            styleClass="mr-2 action-unit-type-chip"/>
                </ui:fragment>

                <!-- Cas où answer.value est null -->
                <ui:fragment rendered="#{empty cc.attrs.answer.value}">
                    <h:outputText value="Aucun code associé"/>
                </ui:fragment>

            </f:facet>

        </p:inplace>
    </cc:implementation>

</ui:composition>