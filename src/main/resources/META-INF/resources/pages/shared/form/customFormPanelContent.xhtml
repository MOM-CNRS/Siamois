<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             xmlns:sharedInput="http://xmlns.jcp.org/jsf/composite/pages/shared/input"
             xmlns:p="http://primefaces.org/ui"
             xmlns:siaInplace="http://xmlns.jcp.org/jsf/composite/pages/shared/inplace"
             xmlns:c="http://java.sun.com/jsp/jstl/core"
>

    <!--@elvariable id="bean" type="fr.siamois.ui.bean.panel.models.panel.single.AbstractSingleEntity"-->
    <!--@elvariable id="customFormPanel" type="fr.siamois.domain.models.form.customform.CustomFormPanel" -->
    <!--@elvariable id="readOnly" type="java.lang.Boolean" -->
    <!--@elvariable id="prefix" type="String" -->
    <!--@elvariable id="root" type="String" -->
    <!--@elvariable id="updateTargetsOnBlur" type="String" -->
    <!--@elvariable id="statusIndex" type="Object" -->


    <p:panelGrid id="customFormPanelGrid-#{statusIndex}-#{prefix}"
                 layout="grid"
    >
        <c:forEach items="#{customFormPanel.rows}" var="row" varStatus="rowStatus">
            <p:row id="row-#{prefix}-#{statusIndex}-#{rowStatus.index}">

                <c:forEach items="#{row.columns}" var="col" varStatus="colStatus">
                    <p:column styleClass="#{col.className}"
                              id="col-#{prefix}-#{statusIndex}-#{rowStatus.index}-#{colStatus.index}">
                                <ui:include src="/pages/shared/form/customFormFieldContent.xhtml">
                                    <ui:param name="bean" value="#{bean}" />
                                    <ui:param name="col" value="#{col}" />
                                    <ui:param name="hasBeenModified" value="#{bean.formResponse.answers.get(col.field).hasBeenModified}"/>
                                    <ui:param name="prefix" value="#{prefix}" />
                                    <ui:param name="statusIndex" value="#{statusIndex}" />
                                    <ui:param name="rowIndex" value="#{rowStatus.index}" />
                                    <ui:param name="colIndex" value="#{colStatus.index}" />
                                    <ui:param name="root" value="#{root}" />
                                    <ui:param name="panelIndex" value="#{panelIndex}" />
                                    <ui:param name="answer" value="#{bean.formResponse.answers.get(col.field)}"/>
                                    <ui:param name="onModified" value="#{bean.setFieldAnswerHasBeenModified(col.field)}"/>
                                </ui:include>
                    </p:column>


                </c:forEach>
            </p:row>
        </c:forEach>
    </p:panelGrid>

    <ui:fragment rendered="#{empty customFormPanel.rows}">
        <i>Aucun champ</i>
    </ui:fragment>

</ui:fragment>