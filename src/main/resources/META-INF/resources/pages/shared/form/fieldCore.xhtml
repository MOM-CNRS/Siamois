<!-- /pages/shared/field/fieldCore.xhtml -->
<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             xmlns:siaInplace="http://xmlns.jcp.org/jsf/composite/pages/shared/inplace">

    <!-- Expected @elvariable parameters -->
    <!--@elvariable id="bean" type="fr.siamois.ui.form.EntityFormContext"-->
    <!--@elvariable id="formCtx" type="fr.siamois.ui.form.EntityFormContext"-->
    <!--@elvariable id="col" type="fr.siamois.ui.table.TableColumn"-->
    <!--@elvariable id="prefix" type="java.lang.String"-->
    <!--@elvariable id="statusIndex" type="java.lang.Integer"-->
    <!--@elvariable id="rowIndex" type="java.lang.Integer"-->
    <!--@elvariable id="colIndex" type="java.lang.Integer"-->
    <!--@elvariable id="root" type="java.lang.String"-->
    <!--@elvariable id="panelIndex" type="java.lang.Integer"-->
    <!--@elvariable id="hasBeenModified" type="java.lang.Boolean"-->
    <!--@elvariable id="answer" type="fr.siamois.domain.models.form.customfieldanswer.CustomFieldAnswer" required="true"-->
    <!--@elvariable id="onModified" type="javax.el.MethodExpression"-->
    <!--@elvariable id="panelHeaderUpdateId" type="java.lang.String"-->
    <!--@elvariable id="hasAutoGenerationFunction" type="java.lang.Boolean"-->
    <!--@elvariable id="onGenerateValue" type="javax.el.MethodExpression"-->
    <!--@elvariable id="panelStyleClass" type="java.lang.String"-->
    <!-- @elvariable id="conceptFieldsUpdateTargetsOnBlur" type="java.lang.String" -->
    <!-- @elvariable id="updateTargetsOnBlur" type="java.lang.String" -->
    <!-- @elvariable id="spatialUnitOptions" type="java.util.List" -->
    <!-- @elvariable id="mode" type="java.lang.String" -->
    <!-- @elvariable id="panelId" type="java.lang.String" -->

    <!-- TEXT -->

    <siaInplace:text
            id="text"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldText'}"
            field="#{col.field}"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            hasBeenModified="#{hasBeenModified}"
            answer="#{answer}"
            mode="#{mode}"
            updateTargetsOnBlur="#{panelHeaderUpdateId}"
            panelId="#{panelId}"
            onModified="#{formCtx.onFieldAnswerModifiedListener}"
            hasAutoGenerationFunction="#{hasAutoGenerationFunction}"
            onGenerateValue="#{onGenerateValue}"
    />

    <!-- INTEGER -->
    <siaInplace:integer
            id="integer"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldInteger'}"
            panelModel="#{bean}"
            field="#{col.field}"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            hasBeenModified="#{hasBeenModified}"
            panelId="#{panelId}"
            onModified="#{formCtx.onFieldAnswerModifiedListener}"
            answer="#{answer}"
            mode="#{mode}"
            updateTargetsOnBlur="#{panelHeaderUpdateId}"
    />

    <!-- DATETIME -->
    <siaInplace:datePicker
            id="datePicker"
            panelId="#{panelId}"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldDateTime'}"
            field="#{col.field}"
            hasBeenModified="#{hasBeenModified}"
            answer="#{answer}"
            mode="#{mode}"
            updateTargetsOnBlur="#{panelHeaderUpdateId}"
            onModified="#{formCtx.onFieldAnswerModifiedListener}"
            panelStyleClass="#{panelStyleClass}"
    />

    <!-- CONCEPT -->
    <siaInplace:concept
            id="concept"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldSelectOneFromFieldCode'}"
            hasBeenModified="#{hasBeenModified}"
            field="#{col.field}"
            panelId="#{panelId}"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            mode="#{mode}"
            updateTargetsOnBlur="#{conceptFieldsUpdateTargetsOnBlur} #{updateTargetsOnBlur}"
            answer="#{answer}"
            panelStyleClass="#{panelStyleClass}"
            onConceptChanged="#{formCtx.setFieldConceptAnswerHasBeenModified}"
    />

    <!-- Select one action -->
    <siaInplace:action
            id="action"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldSelectOneActionUnit'}"
            hasBeenModified="#{hasBeenModified}"
            field="#{col.field}"
            mode="#{mode}"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            updateTargetsOnBlur="#{updateTargetsOnBlur}"
            answer="#{answer}"/>


    <siaInplace:spatial
            id="spatial"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldSelectOneSpatialUnit'}"
            hasBeenModified="#{hasBeenModified}"
            field="#{col.field}"
            mode="#{mode}"
            panelId="#{panelId}"
            onModified="#{formCtx.onFieldAnswerModifiedListener}"
            updateTargetsOnBlur="#{panelHeaderUpdateId}"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            spatialUnitOptions="#{spatialUnitOptions}"
            answer="#{answer}"
    />


    <!-- Select one from person -->
    <siaInplace:person
            id="onePerson"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldSelectOnePerson'}"
            hasBeenModified="#{hasBeenModified}"
            field="#{col.field}"
            mode="#{mode}"
            panelStyleClass="#{panelStyleClass}"
            required="#{col.required}"
            panelId="#{panelId}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            onModified="#{formCtx.onFieldAnswerModifiedListener}"
            updateTargetsOnBlur="#{panelHeaderUpdateId}"
            answer="#{answer}"/>


    <!-- Select multiple from person -->
    <siaInplace:person
            id="multiplePerson"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldSelectMultiplePerson'}"
            hasBeenModified="#{hasBeenModified}"
            field="#{col.field}"
            multiple="true"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            mode="#{mode}"
            onModified="#{formCtx.onFieldAnswerModifiedListener}"
            panelStyleClass="#{panelStyleClass}"
            updateTargetsOnBlur="#{updateTargetsOnBlur}"
            answer="#{answer}"/>


    <!-- Select spatial unit from tree -->
    <siaInplace:spatialUnitTree
            id="spatialUnitTree"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldSelectMultipleSpatialUnitTree'}"
            hasBeenModified="#{hasBeenModified}"
            field="#{col.field}"
            mode="#{mode}"
            formCtx="#{formCtx}"
            updateTargetsOnBlur="#{updateTargetsOnBlur}"
            answer="#{answer}"/>

    <!-- Select one code OA -->
    <siaInplace:actionCode
            id="actionCode"
            rendered="#{col.field['class'].simpleName eq 'CustomFieldSelectOneActionCode'}"
            field="#{col.field}"
            required="#{col.required}"
            label="#{spatialUnitFieldBean.resolveCustomFieldLabel(col.field)}"
            hasBeenModified="#{hasBeenModified}"
            answer="#{answer}"
            mode="#{mode}"
            updateTargetsOnBlur="#{updateTargetsOnBlur}"
    />


</ui:fragment>
