<!-- /resources/components/tableToolbar.xhtml -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
>

    <p:toolbar id="tableToolbar">
        <p:toolbarGroup>
            <p:toolbarGroup align="left">
                <div style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 1em; align-items: center;">
                    <!-- Toggle Switch -->
                    <p:toggleSwitch
                            id="tableTypeToggleSwitch"
                            rendered="#{tableModel.isSwitchVisible()}"
                            value="#{tableModel.treeMode}"
                            onIcon="bi bi-list-nested"
                            offIcon="bi bi-list">
                        <p:ajax process="@this" update=":#{updateTableString}:tableContainer" onstart="PF('#{cc.clientId}_buiTables').show()"
                                oncomplete="PF('#{updateTableString}_buiTables').hide()"/>

                    </p:toggleSwitch>

                    <!-- Global Search -->
                    <span class="filter-container ui-input-icon-left">
                        <i class="bi bi-search"/>
                        <p:inputText id="globalFilter"
                                     value="#{tableModel.globalFilter}"
                                     onkeyup="PrimeFaces.debounce(() => PF('#{cc.clientId}_#{tableId}').filter())"
                                     placeholder="#{langBean.msg('common.action.search')}"/>
                    </span>

                    <!-- Column Toggler -->
                    <p:commandButton
                            id="toggler" type="button"
                            value="#{langBean.msg('table.columnvisibility')}"
                            icon="pi pi-align-justify"/>
                    <p:columnToggler
                            datasource=":#{cc.clientId}:#{tableId}"
                            trigger=":#{cc.clientId}:#{tableId}:toggler">
                        <p:ajax event="toggle" listener="#{cc.attrs.tableModel.onToggle}"/>
                    </p:columnToggler>

                    <!-- Save and Cancel Buttons -->
                    <p:commandButton id="saveButton"
                                     value="Sauvegarder"
                                     rendered="#{tableModel.hasUnsavedModifications()}"
                                     actionListener="#{tableModel.save()}"
                                     update="#{updateTableString} templateFormCC:templateForm:templateGrowl"/>
                    <p:commandLink value="Annuler les modifications" id="cancelButton"
                                   rendered="#{tableModel.hasUnsavedModifications()}"
                                   immediate="true"
                                   action="#{tableModel.cancelModifications()}"
                                   update="#{updateTableString}"/>
                </div>
            </p:toolbarGroup>
        </p:toolbarGroup>

        <p:toolbarGroup align="right">
            <p:commandButton
                    value="#{langBean.msg('common.action.create')}"
                    rendered="#{not empty tableModel.toolbarCreateConfig and flowBean.isWriteMode}"
                    icon="bi bi-plus-square"
                    immediate="true"
                    action="#{tableModel.openCreateFromToolbar(genericNewUnitDialogBean,
                    cc.clientId.concat(':tableContainer'),
                    cc.clientId.concat('_').concat(tableId)
                    )}"
                    oncomplete="PF('newUnitDiag').show();"
                    update="newUnitForm">
            </p:commandButton>
        </p:toolbarGroup>
    </p:toolbar>
</ui:composition>
