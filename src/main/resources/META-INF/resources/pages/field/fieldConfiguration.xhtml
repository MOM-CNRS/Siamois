<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <!-- Import de BOOTSTRAP -->
    <link rel="stylesheet" type="text/css" href="resources/css/bootstrap.min.css"/>
    <script src="resources/js/bootstrap.bundle.min.js"></script>
    <title>Configuration des champs</title>
</h:head>

<f:metadata>
    <f:viewAction action="#{fieldConfigurationBean.onLoad()}"/>
</f:metadata>

<body>
<h1>Field Configuration</h1>
<h:outputText value="Page de configuration de #{fieldConfigurationBean.authenticatedUser}"/>
<h2>Unités spatiales</h2>
<h3>Types d'unités spatiales</h3>
<div class="ui-fluid">
    <h:form>
        <div class="field grid">
            <p:outputLabel for="serverUrl" styleClass="col-12 md:col-2" value="URL du serveur"/>
            <div class="col-12 md:col-10">
                <p:inputText id="serverUrl" value="#{fieldConfigurationBean.serverUrl}"/>
            </div>
            <p:commandButton value="Accéder au serveur" action="#{fieldConfigurationBean.loadThesaurusValue()}" update="globalThesaurusId,globalCollectionsId"/>
        </div>
        <div class="field grid">
            <p:outputLabel for="globalThesaurusId" styleClass="col-12 md:col-2" value="Identifiant interne du thésaurus"/>
            <div class="col-12 md:col-10">
                <p:selectOneMenu id="globalThesaurusId" value="#{fieldConfigurationBean.selectedThesaurus}">
                    <f:selectItems value="#{fieldConfigurationBean.vocabularies}" var="vocab"
                                   itemLabel="#{vocab.vocabularyName} (#{vocab.externalVocabularyId})"
                                   itemValue="#{vocab.externalVocabularyId}"/>

                </p:selectOneMenu>
                <p:commandButton value="Charger les groupes" action="#{fieldConfigurationBean.loadGroupValue()}" update="globalCollectionsId"/>
            </div>
        </div>

        <div class="field grid">
            <p:outputLabel for="globalCollectionsId" styleClass="col-12 md:col-2"
                           value="Selectionnez la collection à utiliser"/>
            <div class="col-12 md:col-10">
                <p:selectOneMenu id="globalCollectionsId" value="#{fieldConfigurationBean.selectedValue}">
                    <f:selectItems value="#{fieldConfigurationBean.collections}" var="group"
                                   itemLabel="#{fieldConfigurationBean.labels.get(group.externalId)} (#{group.externalId})"
                                    itemValue="#{group.externalId}"/>

                </p:selectOneMenu>
            </div>
        </div>


        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        <p:commandButton value="Sauvegarder" action="#{fieldConfigurationBean.processForm()}"/>

        <p:messages id="messages" showDetail="true" closable="true">
            <p:autoUpdate/>
        </p:messages>

    </h:form>

    <p:button value="Retour à la page d'accueil" outcome="/index.xhtml"/>
</div>

</body>

</html>