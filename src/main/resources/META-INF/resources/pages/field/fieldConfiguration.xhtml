<ui:composition template="/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <f:metadata>
        <f:viewAction action="#{fieldConfigBean.onLoad()}"/>
    </f:metadata>

    <ui:define name="content">
        <h1>${langBean.msg("fieldconfig.title")}</h1>
        <h:form id="fieldConfig">
            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
            <p:messages id="messages" showDetail="true" closable="true">
                <p:autoUpdate/>
            </p:messages>
            <h2>Choix de l'instance</h2>

            <p:outputLabel for="instance-field" value="URI de l'instance de OpenTheso"/>
            <p:inputText id="instance-field" value="#{fieldConfigBean.FInstance}"/>

            <p:commandButton value="Charger l'instance" action="#{fieldConfigBean.loadInstance()}" update="selected-vocab"/>
            <h2>Choix du thésaurus</h2>

            <p:outputLabel for="selected-vocab" value="Choix du thésaurus"/>
            <p:selectOneMenu id="selected-vocab"
                             value="#{fieldConfigBean.FSelectedVocab}"
                             converter="#{fieldConfigBean.vocabularyConverter}">
                <f:selectItems
                        value="#{fieldConfigBean.vocabularies}"
                        var="vocab"
                        itemLabel="#{vocab.vocabularyName} (#{vocab.externalVocabularyId})"
                />
            </p:selectOneMenu>

            <p:commandButton value="Charger la configuration depuis le thésaurus" action="#{fieldConfigBean.loadConfig()}"/>

            <h2>Configuration par champs</h2>
        </h:form>
    </ui:define>

</ui:composition>